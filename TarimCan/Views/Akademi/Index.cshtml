@using TarimCan.Models

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/DashboardTheme/assets/global/css/components-rounded.css" rel="stylesheet" />
<link href="~/DashboardTheme/assets/admin/pages/css/blog.css" rel="stylesheet" />
<link href="~/DashboardTheme/assets/admin/pages/css/news.css" rel="stylesheet" />

<div class="col-md-12">
    <div class="portlet light bordered minHeight">
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-equalizer font-green-sharp"></i>
                <span class="caption-subject font-green-sharp bold uppercase">ÇİFTÇİ AKADEMİSİ</span>
            </div>
        </div>

        <div class="portlet light">
            <div class="portlet-body">
                <div class="row">
                    <div class="col-md-12 blog-page">
                        <div class="row">
                            <div class="col-md-9 col-sm-8 article-block" id="pnlContent">

                                @{
                                    List<AkademiModel> list = ViewBag.TumVideolar;

                                    if (list.Count > 0)
                                    {
                                        foreach (var item in list)
                                        {
                                            <div class="row">
                                                <div class="col-md-3 blog-img blog-tag-data">
                                                    <img src="../DashboardTheme/assets/admin/pages/media/gallery/image4.jpg" alt="" class="img-responsive" style="border-radius:8px">
                                                    <ul class="list-inline">
                                                        <li>
                                                            <i class="fa fa-calendar"></i>
                                                            <a href="javascript:;">
                                                                @item.EklenmeTarihi.ToString("dd.MM.yyyy")
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <i class="fa fa-comments"></i>
                                                            <a href="javascript:;">
                                                                @item.GoruntulenmeSayisi Görüntüleme
                                                            </a>
                                                        </li>
                                                    </ul>
                                                    <ul class="list-inline blog-tags">
                                                        <li>
                                                            <i class="fa fa-tags"></i>
                                                            <a href="javascript:;">
                                                                @item.OynatmaListesi
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-8 blog-article">
                                                    <h3 style=" margin-top: 10px !important;">
                                                        <a href="/Akademi/Detay/@item.Id">
                                                            @item.Baslik
                                                        </a>
                                                    </h3>
                                                    <p style="text-align:justify">
                                                        @item.Aciklama
                                                    </p>
                                                    <a class="btn blue" href="/Akademi/Detay/@item.Id">
                                                        Devamı <i class="m-icon-swapright m-icon-white"></i>
                                                    </a>
                                                </div>
                                            </div>
                                            <hr>
                                        }
                                    }
                                }

                            </div>
                            <!--end col-md-9-->
                            <div class="col-md-3 col-sm-4 blog-sidebar">
                                <h3 style="margin-top:0px">İçerik Kategorileri</h3>
                                <div class="top-news">

                                    @{
                                        List<OynatmaListesiKategoriModel> kategoriList = ViewBag.OynatmaListesiKategorileri;

                                        if (kategoriList.Count > 0)
                                        {
                                            foreach (var item in kategoriList)
                                            {
                                                <a href="javascript:;" class="btn @item.KategoriRengi" onclick="KategoriyeGoreVideoGetir('@item.OynatmaListesiId')">
                                                    <span>
                                                        @item.OynatmaListesi
                                                    </span>
                                                    <em>Son eklenen video: 16.08.2022</em>
                                                    <em>
                                                        <i class="fa fa-tags"></i>
                                                        Kayıtlı Video Sayısı: @item.VideoSayisi
                                                    </em>
                                                    <i class="fa fa-bolt top-news-icon"></i>
                                                </a>
                                            }
                                        }
                                    }
                                </div>

                            </div>
                            <!--end col-md-3-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @Html.AntiForgeryToken()
</div>

<script src="@Url.Content("~/DashboardTheme/assets/global/plugins/jquery.min.js")" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/imask/6.4.2/imask.min.js" integrity="sha512-l0grYOI8XZga5TajPOiqLrQVCKrdh+k0QSEtS+cpJlNeI8Nu9GOhsVaFyFQuPQfYp02GnhsyHqkPR7P7BTKYAQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-dateFormat/1.0/jquery.dateFormat.min.js" integrity="sha512-YKERjYviLQ2Pog20KZaG/TXt9OO0Xm5HE1m/OkAEBaKMcIbTH1AwHB4//r58kaUDh5b1BWwOZlnIeo0vOl1SEA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>

    function KategoriyeGoreVideoGetir(KategoriId) {

        var data = (
        {
            __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val(),
            'KategoriId': KategoriId
        });

        //console.log("dataObject: " + JSON.stringify(data));

        $.ajax({
            type: "POST",
            url: '@Url.Action("OynatmaListesineGoreVideoGetir", "Akademi")',
            data: data,
            success: function (response) {
                //console.log("Response: " + JSON.stringify(response))

                document.getElementById("pnlContent").innerHTML = "";

                for (var k in response) {
                    var cont = '<div class=\"row\"> <div class=\"col-md-3 blog-img blog-tag-data\"> <img src=\"../DashboardTheme/assets/admin/pages/media/gallery/image4.jpg\" alt=\"\" class=\"img-responsive\" style=\"border-radius:8px\"> '+
                        '<ul class=\"list-inline\"> <li> <i class=\"fa fa-calendar\"></i> <a href=\"javascript:;\"> ' + response[k].EklenmeTarihiFormatted + ' </a> </li> <li> <i class=\"fa fa-comments\"></i> <a href=\"javascript:;\"> '+
                        + response[k].GoruntulenmeSayisi + '  Görüntüleme </a> </li> </ul> <ul class=\"list-inline blog-tags\"> <li> <i class=\"fa fa-tags\"></i> <a href=\"javascript:;\"> ' + response[k].OynatmaListesi + '  </a> </li> </ul> </div> '+
                        '<div class=\"col-md-8 blog-article\"> <h3 style=\" margin-top: 10px !important;\"> <a href=\"/Akademi/Detay/' + response[k].Id + '\">  ' + response[k].Baslik + ' </a> </h3> <p style=\"text-align:justify\">  ' + response[k].Aciklama + '  </p> '+
                        '<a class=\"btn blue\" href=\"/Akademi/Detay/' + response[k].Id + '\"> Devamı <i class=\"m-icon-swapright m-icon-white\"></i> </a> </div> </div> <hr> ';

                    $('#pnlContent').append(cont);
                }
            }
        });
    }
</script>

<script>
    $('#Akademi').addClass("active");
</script>
